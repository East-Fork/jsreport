{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"Studio\"","webpack:///external \"Studio.libraries['react']\"","webpack:///./studio/main_dev.js","webpack:///./studio/NewComponentModal.js","webpack:///./studio/ComponentProperties.js"],"names":["Studio","addEntitySet","name","faIcon","visibleName","onNew","options","openModal","NewComponentModal","entityTreePosition","entityEditorComponentKeyResolvers","push","entity","__entitySet","key","addPropertiesComponent","ComponentProperties","title","getDefaultEngine","found","engines","find","e","props","nameInputRef","React","createRef","engineInputRef","state","error","processing","setTimeout","current","focus","submit","target","value","val","defaults","engine","setState","api","post","data","_id","cloning","undefined","entitySet","folderShortid","folder","shortid","message","close","openNewTab","handleKeyPress","map","color","display","Component","onChange","v","renderEngines"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","module.exports = Studio;","module.exports = Studio.libraries['react'];","import NewComponentModal from './NewComponentModal.js'\r\nimport ComponentProperties from './ComponentProperties.js'\r\nimport Studio from 'jsreport-studio'\r\n\r\nStudio.addEntitySet({\r\n  name: 'components',\r\n  faIcon: 'fa-puzzle-piece',\r\n  visibleName: 'component',\r\n  onNew: (options) => Studio.openModal(NewComponentModal, options),\r\n  entityTreePosition: 800\r\n})\r\n\r\nStudio.entityEditorComponentKeyResolvers.push((entity) => {\r\n  if (entity.__entitySet === 'components') {\r\n    return {\r\n      key: 'templates',\r\n      entity\r\n    }\r\n  }\r\n})\r\n\r\nStudio.addPropertiesComponent(ComponentProperties.title, ComponentProperties, (entity) => entity.__entitySet === 'components')\r\n","/* import PropTypes from 'prop-types' */\r\nimport React, { Component } from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nfunction getDefaultEngine () {\r\n  const found = Studio.engines.find((e) => e === 'handlebars')\r\n\r\n  if (found) {\r\n    return found\r\n  }\r\n\r\n  return Studio.engines[0]\r\n}\r\n\r\nexport default class NewComponentModal extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.nameInputRef = React.createRef()\r\n    this.engineInputRef = React.createRef()\r\n\r\n    this.state = {\r\n      error: null,\r\n      processing: false\r\n    }\r\n  }\r\n\r\n  // the modal component for some reason after open focuses the panel itself\r\n  componentDidMount () {\r\n    setTimeout(() => this.nameInputRef.current.focus(), 0)\r\n  }\r\n\r\n  handleKeyPress (e) {\r\n    if (e.key === 'Enter') {\r\n      this.submit(e.target.value)\r\n    }\r\n  }\r\n\r\n  async submit (val) {\r\n    if (this.state.processing) {\r\n      return\r\n    }\r\n\r\n    const name = val || this.nameInputRef.current.value\r\n\r\n    const entity = {\r\n      ...this.props.options.defaults,\r\n      name,\r\n      engine: this.engineInputRef.current.value,\r\n      __entitySet: 'components'\r\n    }\r\n\r\n    this.setState({ processing: true })\r\n\r\n    try {\r\n      await Studio.api.post('/studio/validate-entity-name', {\r\n        data: {\r\n          _id: this.props.options.cloning === true ? undefined : entity._id,\r\n          name: name,\r\n          entitySet: 'components',\r\n          folderShortid: entity.folder != null ? entity.folder.shortid : null\r\n        }\r\n      })\r\n    } catch (e) {\r\n      this.setState({\r\n        error: e.message,\r\n        processing: false\r\n      })\r\n\r\n      return\r\n    }\r\n\r\n    this.setState({\r\n      error: null,\r\n      processing: false\r\n    })\r\n\r\n    this.props.close()\r\n    Studio.openNewTab({\r\n      entity,\r\n      entitySet: 'components',\r\n      name\r\n    })\r\n  }\r\n\r\n  render () {\r\n    const { error, processing } = this.state\r\n\r\n    return (\r\n      <div>\r\n        <div className='form-group'>\r\n          <label>name</label>\r\n          <input\r\n            type='text'\r\n            placeholder='name...'\r\n            ref={this.nameInputRef}\r\n            onKeyPress={(e) => this.handleKeyPress(e)}\r\n          />\r\n        </div>\r\n        <div className='form-group'>\r\n          <label>engine</label>\r\n          <select\r\n            defaultValue={getDefaultEngine()}\r\n            ref={this.engineInputRef}\r\n          >\r\n            {Studio.engines.map((e) => <option key={e} value={e}>{e}</option>)}\r\n          </select>\r\n        </div>\r\n        <div className='form-group'>\r\n          <span style={{ color: 'red', display: error ? 'block' : 'none' }}>{error}</span>\r\n        </div>\r\n        <div className='button-bar'>\r\n          <button className='button confirmation' disabled={processing} onClick={() => this.submit()}>Ok</button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","/* import PropTypes from 'prop-types' */\r\nimport React, { Component } from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class ComponentProperties extends Component {\r\n  renderEngines () {\r\n    const { entity, onChange } = this.props\r\n\r\n    return (\r\n      <select value={entity.engine} onChange={(v) => onChange({ _id: entity._id, engine: v.target.value })}>\r\n        {Studio.engines.map((e) => <option key={e} value={e}>{e}</option>)}\r\n      </select>\r\n    )\r\n  }\r\n\r\n  static title (entity) {\r\n    return entity.engine\r\n  }\r\n\r\n  render () {\r\n    if (this.props.entity.__entitySet !== 'components') {\r\n      return <div />\r\n    }\r\n\r\n    return (\r\n      <div className='properties-section'>\r\n        <div className='form-group'><label>engine</label> {this.renderEngines()}</div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"sourceRoot":""}