{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"Studio.libraries['react']\"","webpack:///external \"Studio\"","webpack:///./studio/ShowColor.js","webpack:///./studio/emitter.js","webpack:///./studio/findTagInSet.js","webpack:///./studio/organizeState.js","webpack:///./studio/ColorPickerTrigger.js","webpack:///./studio/simpleCheckForValidColor.js","webpack:///./studio/colorLuminance.js","webpack:///./studio/TagEntityTreeButtonToolbar.css","webpack:///./studio/main_dev.js","webpack:///./studio/NewTagModal.js","webpack:///./studio/ColorPicker/index.js","webpack:///./studio/ColorPicker/ColorWrap.js","webpack:///C:/work/jsreport/jsreport/node_modules/lodash.debounce/index.js","webpack:///(webpack)/buildin/global.js","webpack:///./studio/ColorPicker/Picker.js","webpack:///./studio/ColorPicker/utils/handleHover.js","webpack:///./studio/ColorPicker/Swatch.js","webpack:///./studio/TagEditor.js","webpack:///./studio/TagProperties.js","webpack:///./studio/EntityTagProperties.js","webpack:///./studio/EntityTreeTagOrganizer.js","webpack:///C:/work/jsreport/jsreport/node_modules/mitt/dist/mitt.es.js","webpack:///./shared/reservedTagNames.js","webpack:///./studio/TagEntityTreeOrganizeButtonToolbar.js","webpack:///./studio/TagEntityTreeFilterButtonToolbar.js","webpack:///./studio/TagEntityTreeFilterByTags.js","webpack:///external \"Studio.libraries['react-list']\"","webpack:///./studio/getColorLuminance.js","webpack:///./studio/hexToRgb.js","webpack:///./studio/TagEntityTreeFilterByTags.css","webpack:///./studio/TagEntityTreeItem.js","webpack:///./studio/TagEntityTreeTagGroupItem.js","webpack:///./studio/filterItemWithTagsStrategy.js"],"names":["ShowColor","props","color","height","width","borderColor","currentColor","backgroundColor","borderWidth","borderStyle","display","verticalAlign","emitter","tagSet","tagShortId","tag","found","some","tagInSet","shortid","undefined","current","filterTags","ColorPicketTrigger","displayColorPicker","containerStyles","onClickColorTrigger","onInputChange","onChangeSelectionColor","onCloseColorPicker","translateXColorPickerFromTrigger","translateYColorPickerFromTrigger","containerTriggerPickerStyles","padding","defaultContainerStyles","currentContainerStyles","Object","assign","colorPickerContainerStyles","transformValue","transform","ev","target","value","hex","HEX_COLOR_REGEXP","simpleCheckForValidColor","test","lum","selectedLum","selectedHex","String","replace","length","rgb","c","i","parseInt","substr","Math","round","min","max","toString","organizeState","Studio","addEntitySet","name","faIcon","visibleName","onNew","options","openModal","NewTagModal","helpUrl","referenceAttributes","entityTreePosition","sharedComponents","initializeListeners","push","keys","entitySets","forEach","entitySetName","entitySet","indexOf","on","organizationMode","selectedTags","addEditorComponent","TagEditor","addPropertiesComponent","TagProperties","title","entity","__entitySet","EntityTagProperties","addEntityTreeWrapperComponent","EntityTreeTagOrganizer","addEntityTreeToolbarComponent","TagEntityTreeFilterButtonToolbar","TagEntityTreeOrganizeButtonToolbar","addEntityTreeItemComponent","TagEntityTreeItem","TagEntityTreeTagGroupItem","entityTreeFilterItemResolvers","filterItemWithTagsStrategy","nameRef","React","createRef","descriptionRef","state","selectedColor","error","setTimeout","focus","e","key","createTag","setState","defaults","description","api","post","data","response","addExistingEntity","openTab","activateNewTab","onNewEntity","close","message","handleKeyPress","border","colorInputValue","colorHex","resize","opacity","Component","Picker","colorToState","ColorWrap","ColorPicker","visible","debounce","fn","event","handleChange","bind","isValidColor","colors","onChangeComplete","onChange","PureComponent","defaultProps","PickerSwatch","hover","onClick","styles","swatch","position","zIndex","outline","boxShadow","triangle","card","background","borderRadius","flexWrap","source","map","handleHover","Span","handleMouseOver","handleMouseOut","Swatch","style","cursor","handleClick","entities","_id","v","EntityRefSelect","selectValues","selected","tags","removeInvalidTagReferences","updatedTags","filter","t","k","references","modalProps","folder","getNameAndColor","foundTags","tg","getSelectedTags","tIndex","allSelectTags","marginRight","require","noTagGroupName","tagsGroupName","organizeByDefault","extensions","organizeByTags","onOrganizationModeChange","off","organizeByTag","newItems","entitySetsNames","allTagEntities","currentTagEntities","entitiesByTagAndType","entitiesByTypeWithoutTag","tagsWithNoEntities","tagName","entitiesByType","typesInTag","every","type","tagItem","isGroup","items","isEntitySet","typeItem","noTagsItem","item","tagsItem","collection","tagFound","getReferences","entityTag","groupEntityByTagAndType","entitiesInSet","entitiesInSetCount","j","addItemsByTag","cloneElement","children","renderDefaultTree","renderTree","getSetsToRender","groupEntitiesByTag","reservedTagNames","module","exports","default","handleOrganizationModeChange","stopPropagation","emit","closeMenu","active","showFilter","handleFilterClick","handleCloseFilter","handleTagSelectChange","setFilter","allTags","isActive","TagEntityTreeFilterByTags","tagSelectionRef","tagSelectionInputRef","tagListRef","showTagsList","filterText","createRenderer","addSelectedTag","handleTagSelectionClick","handleChangeInputTag","handleKeyDownInputTag","onRemoveTagItem","index","renderTagItem","previousSelectedTags","onTagSelectChange","filterPass","foundInSelectedTags","selectTag","defaultPrevented","keyCode","inputTag","remove","enterKey","removeKey","preventDefault","onFilterClose","selectedTagsLastIndex","tagIndex","originalSelectedTags","slice","tagsListItem","tagsToShowInList","getTagsToShow","stylesForTagsList","stylesForInputTag","searchTagsContainer","searchTagsInputBox","tagsSelect","tagStyles","tagsSelectItem","tagsSelectItemRemove","searchTags","tagsListContainer","tagsList","tagsListEmpty","R","G","B","RsRGB","r","GsRGB","g","BsRGB","b","pow","shorthandRegex","fullHex","m","result","exec","tagsLength","marginLeft","filterInfo","allTagsInEntity","tagInEntity"],"mappings":"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AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,8CAA8C,kBAAkB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","module.exports = Studio.libraries['react'];","module.exports = Studio;","import React from 'react'\r\nimport simpleCheckForValidColor from './simpleCheckForValidColor'\r\nimport colorLuminance from './colorLuminance'\r\n\r\nconst ShowColor = (props) => {\r\n  const {\r\n    color,\r\n    height = 15,\r\n    width = 20\r\n  } = props\r\n\r\n  let borderColor = props.borderColor\r\n  let currentColor = 'inherit'\r\n\r\n  if (simpleCheckForValidColor(color)) {\r\n    currentColor = color\r\n  }\r\n\r\n  if (!borderColor) {\r\n    borderColor = colorLuminance(currentColor, -0.35)\r\n  }\r\n\r\n  return (\r\n    <span\r\n      style={{\r\n        backgroundColor: currentColor,\r\n        borderWidth: '1px',\r\n        borderStyle: 'solid',\r\n        borderColor: borderColor,\r\n        display: 'inline-block',\r\n        height: height,\r\n        verticalAlign: 'middle',\r\n        width: width\r\n      }}\r\n    />\r\n  )\r\n}\r\n\r\nexport default ShowColor\r\n","import mitt from 'mitt'\r\n\r\nconst emitter = mitt()\r\n\r\nexport default emitter\r\n","\r\nexport default (tagSet, tagShortId) => {\r\n  let tag\r\n\r\n  const found = tagSet.some((tagInSet) => {\r\n    tag = tagInSet\r\n    return tagInSet.shortid === tagShortId\r\n  })\r\n\r\n  if (found) {\r\n    return tag\r\n  }\r\n\r\n  return undefined\r\n}\r\n","\r\nexport let current\r\nexport let filterTags\r\n","import React from 'react'\r\nimport { Popover } from 'jsreport-studio'\r\nimport ShowColor from './ShowColor'\r\nimport ColorPicker from './ColorPicker'\r\n\r\nconst ColorPicketTrigger = (props) => {\r\n  const {\r\n    displayColorPicker,\r\n    color,\r\n    containerStyles,\r\n    onClickColorTrigger,\r\n    onInputChange,\r\n    onChangeSelectionColor,\r\n    onCloseColorPicker,\r\n    translateXColorPickerFromTrigger,\r\n    translateYColorPickerFromTrigger\r\n  } = props\r\n\r\n  const containerTriggerPickerStyles = {\r\n    display: 'inline-block',\r\n    height: '32px',\r\n    padding: '5px'\r\n  }\r\n\r\n  const defaultContainerStyles = {\r\n    display: 'inline-block'\r\n  }\r\n\r\n  const currentColor = color || ''\r\n  const currentContainerStyles = Object.assign({}, defaultContainerStyles, containerStyles)\r\n\r\n  const colorPickerContainerStyles = {}\r\n\r\n  if (translateXColorPickerFromTrigger || translateYColorPickerFromTrigger) {\r\n    let transformValue = ''\r\n\r\n    if (translateXColorPickerFromTrigger) {\r\n      transformValue += `translateX(${translateXColorPickerFromTrigger}) `\r\n    }\r\n\r\n    if (translateYColorPickerFromTrigger) {\r\n      transformValue += `translateY(${translateYColorPickerFromTrigger}) `\r\n    }\r\n\r\n    colorPickerContainerStyles.transform = transformValue\r\n  }\r\n\r\n  return (\r\n    <div style={currentContainerStyles}>\r\n      <span style={containerTriggerPickerStyles}>\r\n        <span style={{ display: 'inline-block' }}>\r\n          <ShowColor color={currentColor} />&nbsp;\r\n          <input\r\n            type='text'\r\n            value={currentColor}\r\n            style={{ width: '90px' }}\r\n            maxLength={7}\r\n            placeholder='#006600'\r\n            onFocus={onClickColorTrigger}\r\n            onChange={(ev) => typeof onInputChange === 'function' && onInputChange(ev.target.value)}\r\n          />\r\n        </span>\r\n      </span>\r\n      <Popover\r\n        wrapper={false}\r\n        open={displayColorPicker}\r\n        onClose={onCloseColorPicker}\r\n      >\r\n        <div style={colorPickerContainerStyles}>\r\n          <ColorPicker\r\n            color={currentColor}\r\n            onChangeComplete={(color) => typeof onChangeSelectionColor === 'function' && onChangeSelectionColor(color.hex)}\r\n          />\r\n        </div>\r\n      </Popover>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ColorPicketTrigger\r\n","const HEX_COLOR_REGEXP = /^#[0-9A-F]{6}$/i\r\n\r\nconst simpleCheckForValidColor = (color) => {\r\n  return HEX_COLOR_REGEXP.test(color)\r\n}\r\n\r\nexport default simpleCheckForValidColor\r\n","\r\nexport default (hex, lum) => {\r\n  const selectedLum = lum || 0\r\n  let selectedHex\r\n\r\n  selectedHex = String(hex).replace(/[^0-9a-f]/gi, '')\r\n\r\n  if (selectedHex.length < 6) {\r\n    selectedHex = selectedHex[0] + selectedHex[0] + selectedHex[1] + selectedHex[1] + selectedHex[2] + selectedHex[2]\r\n  }\r\n\r\n  // convert to decimal and change luminosity\r\n  let rgb = '#'\r\n  let c\r\n  let i\r\n\r\n  for (i = 0; i < 3; i++) {\r\n    c = parseInt(selectedHex.substr(i * 2, 2), 16)\r\n    c = Math.round(Math.min(Math.max(0, c + (c * selectedLum)), 255)).toString(16)\r\n    rgb += ('00' + c).substr(c.length)\r\n  }\r\n\r\n  return rgb\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"active\":\"x-tags-TagEntityTreeButtonToolbar-active\"};","import Studio from 'jsreport-studio'\r\nimport NewTagModal from './NewTagModal'\r\nimport TagEditor from './TagEditor'\r\nimport TagProperties from './TagProperties'\r\nimport EntityTagProperties from './EntityTagProperties'\r\nimport EntityTreeTagOrganizer from './EntityTreeTagOrganizer'\r\nimport TagEntityTreeOrganizeButtonToolbar from './TagEntityTreeOrganizeButtonToolbar'\r\nimport TagEntityTreeFilterButtonToolbar from './TagEntityTreeFilterButtonToolbar'\r\nimport TagEntityTreeItem from './TagEntityTreeItem'\r\nimport TagEntityTreeTagGroupItem from './TagEntityTreeTagGroupItem'\r\nimport emitter from './emitter'\r\nimport * as organizeState from './organizeState'\r\nimport filterItemWithTagsStrategy from './filterItemWithTagsStrategy'\r\n\r\nStudio.addEntitySet({\r\n  name: 'tags',\r\n  faIcon: 'fa-tag',\r\n  visibleName: 'tag',\r\n  onNew: (options) => Studio.openModal(NewTagModal, options),\r\n  helpUrl: 'http://jsreport.net/learn/tags',\r\n  referenceAttributes: ['color'],\r\n  entityTreePosition: 300\r\n})\r\n\r\nStudio.sharedComponents.NewTagModal = NewTagModal\r\n\r\n// wait for all extensions to be loaded\r\nStudio.initializeListeners.push(() => {\r\n  // add tags to referenceAttributes in all entities\r\n  Object.keys(Studio.entitySets).forEach((entitySetName) => {\r\n    const entitySet = Studio.entitySets[entitySetName]\r\n\r\n    // ignore tags entity set\r\n    if (entitySet.name === 'tags') {\r\n      return\r\n    }\r\n\r\n    if (entitySet.referenceAttributes.indexOf('tags') === -1) {\r\n      entitySet.referenceAttributes.push('tags')\r\n    }\r\n  })\r\n})\r\n\r\n// eslint-disable-next-line no-import-assign\r\nemitter.on('organizationModeByTagsChanged', (organizationMode) => { organizeState.current = organizationMode })\r\n// eslint-disable-next-line no-import-assign\r\nemitter.on('filterByTagsChanged', (selectedTags) => { organizeState.filterTags = selectedTags })\r\n\r\nStudio.addEditorComponent('tags', TagEditor)\r\nStudio.addPropertiesComponent(TagProperties.title, TagProperties, (entity) => entity.__entitySet === 'tags')\r\nStudio.addPropertiesComponent(EntityTagProperties.title, EntityTagProperties, (entity) => entity.__entitySet !== 'tags')\r\n\r\nStudio.addEntityTreeWrapperComponent(EntityTreeTagOrganizer)\r\n\r\nStudio.addEntityTreeToolbarComponent(TagEntityTreeFilterButtonToolbar, 'group')\r\nStudio.addEntityTreeToolbarComponent(TagEntityTreeOrganizeButtonToolbar, 'group')\r\n\r\nStudio.addEntityTreeItemComponent(TagEntityTreeItem)\r\nStudio.addEntityTreeItemComponent(TagEntityTreeTagGroupItem, 'groupRight')\r\n\r\nStudio.entityTreeFilterItemResolvers.push(filterItemWithTagsStrategy)\r\n","import React, { Component } from 'react'\r\nimport Studio from 'jsreport-studio'\r\nimport ColorPicketTrigger from './ColorPickerTrigger'\r\n\r\nclass NewTagModal extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.nameRef = React.createRef()\r\n    this.descriptionRef = React.createRef()\r\n\r\n    this.state = {\r\n      displayColorPicker: false,\r\n      selectedColor: '',\r\n      error: null\r\n    }\r\n  }\r\n\r\n  // the modal component for some reason after open focuses the panel itself\r\n  componentDidMount () {\r\n    setTimeout(() => this.nameRef.current.focus(), 0)\r\n  }\r\n\r\n  handleKeyPress (e) {\r\n    if (e.key === 'Enter') {\r\n      this.createTag()\r\n    }\r\n  }\r\n\r\n  async createTag () {\r\n    let entity = {}\r\n\r\n    if (!this.nameRef.current.value) {\r\n      return this.setState({\r\n        error: 'name field cannot be empty'\r\n      })\r\n    }\r\n\r\n    if (!this.state.selectedColor) {\r\n      return this.setState({\r\n        error: 'color field cannot be empty'\r\n      })\r\n    }\r\n\r\n    if (this.props.options.defaults != null) {\r\n      entity = Object.assign(entity, this.props.options.defaults)\r\n    }\r\n\r\n    entity.name = this.nameRef.current.value\r\n    entity.color = this.state.selectedColor\r\n    entity.description = this.descriptionRef.current.value\r\n\r\n    try {\r\n      const response = await Studio.api.post('/odata/tags', {\r\n        data: entity\r\n      })\r\n\r\n      response.__entitySet = 'tags'\r\n\r\n      Studio.addExistingEntity(response)\r\n      Studio.openTab(response, this.props.options.activateNewTab)\r\n\r\n      if (this.props.options.onNewEntity) {\r\n        this.props.options.onNewEntity(response)\r\n      }\r\n\r\n      this.props.close()\r\n    } catch (e) {\r\n      this.setState({\r\n        error: e.message\r\n      })\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const {\r\n      displayColorPicker,\r\n      selectedColor,\r\n      error\r\n    } = this.state\r\n\r\n    return (\r\n      <div>\r\n        <div className='form-group'>\r\n          <label>Name</label>\r\n          <input type='text' name='name' ref={this.nameRef} placeholder='tag name...' onKeyPress={(e) => this.handleKeyPress(e)} />\r\n        </div>\r\n        <div className='form-group'>\r\n          <label>Color</label>\r\n\r\n          <div>\r\n            <ColorPicketTrigger\r\n              displayColorPicker={displayColorPicker}\r\n              containerStyles={{ border: '1px dashed #000' }}\r\n              color={selectedColor}\r\n              onClickColorTrigger={() => this.setState({ displayColorPicker: true })}\r\n              onCloseColorPicker={() => this.setState({ displayColorPicker: false })}\r\n              onInputChange={(colorInputValue) => colorInputValue !== selectedColor && this.setState({ selectedColor: colorInputValue })}\r\n              onChangeSelectionColor={(colorHex) => this.setState({ selectedColor: colorHex })}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className='form-group'>\r\n          <label>Description</label>\r\n          <textarea\r\n            name='description'\r\n            ref={this.descriptionRef}\r\n            placeholder='You can add more details about this tag here...'\r\n            rows='4'\r\n            style={{ resize: 'vertical' }}\r\n          />\r\n        </div>\r\n        <div className='form-group'>\r\n          <span\r\n            style={{ color: 'red', display: error ? 'block' : 'none' }}\r\n          >\r\n            {error}\r\n          </span>\r\n        </div>\r\n        <div className='form-group' style={{ opacity: 0.8 }}>\r\n          <hr />\r\n          <span>\r\n            You can use tags to organize jsreport objects.<br />\r\n            This can be for example a tag to organize and group related templates, images, data, scripts, assets, etc. <br />\r\n            See the <a target='_blank' rel='noreferrer' title='Help' href='http://jsreport.net/learn/tags'>documentation</a> for details.\r\n          </span>\r\n        </div>\r\n        <div className='button-bar'>\r\n          <button onClick={() => this.createTag()} className='button confirmation'>Ok</button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default NewTagModal\r\n","\r\nimport ColorWrap from './ColorWrap'\r\nimport Picker from './Picker'\r\n\r\nexport default ColorWrap(Picker)\r\n","\r\nimport React, { Component, PureComponent } from 'react'\r\nimport debounce from 'lodash.debounce'\r\nimport simpleCheckForValidColor from '../simpleCheckForValidColor'\r\n\r\nconst colorToState = (data) => {\r\n  const color = data.hex ? data.hex : data\r\n\r\n  return {\r\n    hex: `${color}`\r\n  }\r\n}\r\n\r\nconst ColorWrap = (Picker) => {\r\n  class ColorPicker extends (PureComponent || Component) {\r\n    constructor (props) {\r\n      super(props)\r\n\r\n      this.state = {\r\n        ...colorToState(props.color),\r\n        visible: props.display\r\n      }\r\n\r\n      this.debounce = debounce((fn, data, event) => {\r\n        fn(data, event)\r\n      }, 100)\r\n\r\n      this.handleChange = this.handleChange.bind(this)\r\n    }\r\n\r\n    static getDerivedStateFromProps (props) {\r\n      return {\r\n        ...colorToState(props.color),\r\n        visible: props.display\r\n      }\r\n    }\r\n\r\n    handleChange (data, event) {\r\n      const isValidColor = simpleCheckForValidColor(data.hex)\r\n\r\n      if (isValidColor) {\r\n        const colors = colorToState(data)\r\n        this.setState(colors)\r\n        this.props.onChangeComplete && this.debounce(this.props.onChangeComplete, colors, event)\r\n        this.props.onChange && this.props.onChange(colors, event)\r\n      }\r\n    }\r\n\r\n    render () {\r\n      return (\r\n        <Picker\r\n          {...this.props}\r\n          {...this.state}\r\n          onChange={this.handleChange}\r\n        />\r\n      )\r\n    }\r\n  }\r\n\r\n  ColorPicker.defaultProps = {\r\n    color: ''\r\n  }\r\n\r\n  return ColorPicker\r\n}\r\n\r\nexport default ColorWrap\r\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","\r\nimport handleHover from './utils/handleHover'\r\nimport Swatch from './Swatch'\r\n\r\nconst PickerSwatch = handleHover(({ hover, color, onClick }) => {\r\n  const styles = {\r\n    swatch: {\r\n      width: '25px',\r\n      height: '25px'\r\n    }\r\n  }\r\n\r\n  if (hover) {\r\n    styles.swatch = {\r\n      ...styles.swatch,\r\n      position: 'relative',\r\n      zIndex: '2',\r\n      outline: '2px solid #fff',\r\n      boxShadow: '0 0 5px 2px rgba(0,0,0,0.25)'\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={styles.swatch}>\r\n      <Swatch color={color} onClick={onClick} />\r\n    </div>\r\n  )\r\n})\r\n\r\nconst Picker = ({ width, colors, onChange, triangle }) => {\r\n  const styles = {\r\n    card: {\r\n      width,\r\n      background: '#fff',\r\n      border: '1px solid rgba(0,0,0,0.2)',\r\n      boxShadow: '0 3px 12px rgba(0,0,0,0.15)',\r\n      borderRadius: '4px',\r\n      position: 'relative',\r\n      padding: '5px',\r\n      display: 'flex',\r\n      flexWrap: 'wrap'\r\n    }\r\n  }\r\n  const handleChange = (hex, e) => onChange({ hex, source: 'hex' }, e)\r\n\r\n  return (\r\n    <div style={styles.card}>\r\n      {colors.map((c) => (\r\n        <PickerSwatch color={c} key={c} onClick={handleChange} />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nPicker.defaultProps = {\r\n  width: '200px',\r\n  colors: [\r\n    '#B80000', '#DB3E00', '#FCCB00', '#008B02', '#006B76',\r\n    '#1273DE', '#004DCF', '#5300EB', '#EB9694', '#FAD0C3',\r\n    '#FEF3BD', '#C1E1C5', '#BEDADC', '#C4DEF6'\r\n  ]\r\n}\r\n\r\nexport default Picker\r\n","import React from 'react'\r\n\r\nconst handleHover = (Component, Span = 'span') => {\r\n  return class Hover extends React.Component {\r\n    constructor (props) {\r\n      super(props)\r\n\r\n      this.state = { hover: false }\r\n\r\n      this.handleMouseOver = this.handleMouseOver.bind(this)\r\n      this.handleMouseOut = this.handleMouseOut.bind(this)\r\n    }\r\n\r\n    handleMouseOver () {\r\n      this.setState({ hover: true })\r\n    }\r\n\r\n    handleMouseOut () {\r\n      this.setState({ hover: false })\r\n    }\r\n\r\n    render () {\r\n      return (\r\n        <Span onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\r\n          <Component {...this.props} {...this.state} />\r\n        </Span>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nexport default handleHover\r\n","\r\nconst Swatch = ({ color, style, onClick, title = color }) => {\r\n  const styles = {\r\n    swatch: {\r\n      background: color,\r\n      height: '100%',\r\n      width: '100%',\r\n      cursor: 'pointer'\r\n    }\r\n  }\r\n\r\n  const handleClick = (e) => onClick(color, e)\r\n\r\n  return (\r\n    <div style={styles.swatch} onClick={handleClick} title={title} />\r\n  )\r\n}\r\n\r\nexport default Swatch\r\n","import React, { Component } from 'react'\r\nimport ShowColor from './ShowColor'\r\n\r\nclass TagEditor extends Component {\r\n  render () {\r\n    const { entity } = this.props\r\n\r\n    let description\r\n\r\n    if (entity.description) {\r\n      description = entity.description\r\n    } else {\r\n      description = <i>(no description for this tag)</i>\r\n    }\r\n\r\n    return (\r\n      <div className='custom-editor'>\r\n        <div>\r\n          <h1><i className='fa fa-tag' /> {entity.name}</h1>\r\n        </div>\r\n        <div>\r\n          Description: <br />\r\n          <p>{description}</p>\r\n        </div>\r\n        <div>\r\n          Color: <ShowColor color={entity.color} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default TagEditor\r\n","import React, { Component } from 'react'\r\nimport ShowColor from './ShowColor'\r\nimport ColorPicketTrigger from './ColorPickerTrigger'\r\n\r\nexport default class TagProperties extends Component {\r\n  static title (entity, entities) {\r\n    return (\r\n      <span>\r\n        <span>\r\n          tag (color: <ShowColor color={entity.color} width={15} height={15} />)\r\n        </span>\r\n      </span>\r\n    )\r\n  }\r\n\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      displayColorPicker: false\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const { displayColorPicker } = this.state\r\n    const { entity, onChange } = this.props\r\n\r\n    return (\r\n      <div className='properties-section'>\r\n        <div className='form-group'>\r\n          <label>Color</label>\r\n\r\n          <div>\r\n            <ColorPicketTrigger\r\n              displayColorPicker={displayColorPicker}\r\n              containerStyles={{ border: '1px dashed #000' }}\r\n              color={entity.color}\r\n              onClickColorTrigger={() => this.setState({ displayColorPicker: true })}\r\n              onCloseColorPicker={() => this.setState({ displayColorPicker: false })}\r\n              onInputChange={(colorInputValue) => colorInputValue !== entity.color && onChange({ _id: entity._id, color: colorInputValue })}\r\n              onChangeSelectionColor={(colorHex) => onChange({ _id: entity._id, color: colorHex })}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className='form-group'>\r\n          <label>Description</label>\r\n          <textarea\r\n            rows='4'\r\n            style={{ resize: 'vertical' }}\r\n            value={entity.description || ''}\r\n            onChange={(v) => onChange({ _id: entity._id, description: v.target.value })}\r\n          />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport ShowColor from './ShowColor'\r\nimport Studio from 'jsreport-studio'\r\n\r\nconst EntityRefSelect = Studio.EntityRefSelect\r\nconst sharedComponents = Studio.sharedComponents\r\n\r\nconst selectValues = (selected) => {\r\n  const tags = selected.map((v) => {\r\n    return { shortid: v.shortid }\r\n  })\r\n\r\n  return tags\r\n}\r\n\r\nclass EntityTagProperties extends Component {\r\n  static getSelectedTags (entity, entities) {\r\n    const getNameAndColor = (t) => {\r\n      const foundTags = Object.keys(entities).map((k) => entities[k]).filter((tg) => tg.shortid === t.shortid)\r\n\r\n      return foundTags.length ? { name: foundTags[0].name, color: foundTags[0].color } : { name: '', color: undefined }\r\n    }\r\n\r\n    return (entity.tags || []).map((t) => ({\r\n      ...t,\r\n      ...getNameAndColor(t)\r\n    }))\r\n  }\r\n\r\n  static title (entity, entities) {\r\n    if (!entity.tags || !entity.tags.length) {\r\n      return 'tags'\r\n    }\r\n\r\n    return (\r\n      <span>\r\n        tags:&nbsp;\r\n        <span>\r\n          {\r\n            EntityTagProperties.getSelectedTags(entity, entities).map((t, tIndex, allSelectTags) => {\r\n              return (\r\n                <span key={t.name} style={{ display: 'inline-block', marginRight: '2px' }}>\r\n                  <ShowColor color={t.color} width={12} height={15} />\r\n                  &nbsp;\r\n                  {t.name}\r\n                  {tIndex === allSelectTags.length - 1 ? '' : ','}\r\n                </span>\r\n              )\r\n            })\r\n          }\r\n        </span>\r\n      </span>\r\n    )\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.removeInvalidTagReferences()\r\n  }\r\n\r\n  componentDidUpdate () {\r\n    this.removeInvalidTagReferences()\r\n  }\r\n\r\n  removeInvalidTagReferences () {\r\n    const { entity, entities, onChange } = this.props\r\n\r\n    if (!entity.tags) {\r\n      return\r\n    }\r\n\r\n    const updatedTags = entity.tags.filter((t) => Object.keys(entities).filter((k) => entities[k].__entitySet === 'tags' && entities[k].shortid === t.shortid).length)\r\n\r\n    if (updatedTags.length !== entity.tags.length) {\r\n      onChange({ _id: entity._id, tags: updatedTags })\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const { entity, onChange } = this.props\r\n\r\n    return (\r\n      <div className='properties-section'>\r\n        <div className='form-group'>\r\n          <EntityRefSelect\r\n            headingLabel='Select tags'\r\n            newLabel='New tag for template'\r\n            filter={(references) => ({ tags: references.tags })}\r\n            value={entity.tags ? entity.tags.map((t) => t.shortid) : []}\r\n            onChange={(selected) => onChange({ _id: entity._id, tags: selectValues(selected) })}\r\n            renderNew={(modalProps) => <sharedComponents.NewTagModal {...modalProps} options={{ ...modalProps.options, defaults: { folder: entity.folder }, activateNewTab: false }} />}\r\n            multiple\r\n          />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default EntityTagProperties\r\n","import React, { Component } from 'react'\r\nimport Studio from 'jsreport-studio'\r\nimport emitter from './emitter'\r\nimport findTagInSet from './findTagInSet'\r\n\r\nconst { noTagGroupName, tagsGroupName } = require('../shared/reservedTagNames')\r\n\r\nclass EntityTreeTagOrganizer extends Component {\r\n  constructor () {\r\n    super()\r\n\r\n    let organizeByDefault = Studio.extensions.tags.options.organizeByDefault\r\n\r\n    if (organizeByDefault == null) {\r\n      organizeByDefault = false\r\n    }\r\n\r\n    this.state = {\r\n      organizeByTags: organizeByDefault\r\n    }\r\n\r\n    this.onOrganizationModeChange = this.onOrganizationModeChange.bind(this)\r\n  }\r\n\r\n  componentDidMount () {\r\n    emitter.on('organizationModeByTagsChanged', this.onOrganizationModeChange)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    emitter.off('organizationModeByTagsChanged', this.onOrganizationModeChange)\r\n  }\r\n\r\n  onOrganizationModeChange (organizeByTag) {\r\n    this.setState({\r\n      organizeByTags: organizeByTag\r\n    })\r\n  }\r\n\r\n  addItemsByTag (\r\n    newItems,\r\n    entitySetsNames,\r\n    allTagEntities,\r\n    currentTagEntities,\r\n    entitiesByTagAndType,\r\n    entitiesByTypeWithoutTag\r\n  ) {\r\n    const tagsWithNoEntities = []\r\n\r\n    allTagEntities.forEach((tag) => {\r\n      const tagName = tag.name\r\n      const entitiesByType = entitiesByTagAndType[tagName]\r\n      const typesInTag = Object.keys(entitiesByType)\r\n\r\n      if (\r\n        typesInTag.length === 0 ||\r\n        typesInTag.every((type) => entitiesByType[type].length > 0) === false\r\n      ) {\r\n        tagsWithNoEntities.push(tag)\r\n        return\r\n      }\r\n\r\n      let tagItem\r\n\r\n      entitySetsNames.forEach((type) => {\r\n        if (type === 'tags') {\r\n          return\r\n        }\r\n\r\n        const entities = entitiesByType[type]\r\n\r\n        if (!tagItem) {\r\n          tagItem = {\r\n            name: tagName,\r\n            isGroup: true,\r\n            data: tag,\r\n            items: []\r\n          }\r\n\r\n          newItems.push(tagItem)\r\n        }\r\n\r\n        if (!entities || entities.length === 0) {\r\n          tagItem.items.push({\r\n            name: type,\r\n            isEntitySet: true,\r\n            items: []\r\n          })\r\n\r\n          return\r\n        }\r\n\r\n        const typeItem = {\r\n          name: type,\r\n          isEntitySet: true,\r\n          items: []\r\n        }\r\n\r\n        entities.forEach((entity) => {\r\n          typeItem.items.push({\r\n            name: entity.name,\r\n            data: entity\r\n          })\r\n        })\r\n\r\n        tagItem.items.push(typeItem)\r\n      })\r\n    })\r\n\r\n    tagsWithNoEntities.forEach((tag) => {\r\n      const tagItem = {\r\n        name: tag.name,\r\n        isGroup: true,\r\n        data: tag,\r\n        items: []\r\n      }\r\n\r\n      entitySetsNames.forEach((type) => {\r\n        if (type === 'tags') {\r\n          return\r\n        }\r\n\r\n        tagItem.items.push({\r\n          name: type,\r\n          isEntitySet: true,\r\n          items: []\r\n        })\r\n      })\r\n\r\n      newItems.push(tagItem)\r\n    })\r\n\r\n    const noTagsItem = {\r\n      name: noTagGroupName,\r\n      isGroup: true,\r\n      items: []\r\n    }\r\n\r\n    entitySetsNames.forEach((type) => {\r\n      if (type === 'tags') {\r\n        return\r\n      }\r\n\r\n      const item = {\r\n        name: type,\r\n        isEntitySet: true,\r\n        items: []\r\n      }\r\n\r\n      const entities = entitiesByTypeWithoutTag[type]\r\n\r\n      if (entities) {\r\n        entities.forEach((entity) => {\r\n          item.items.push({\r\n            name: entity.name,\r\n            data: entity\r\n          })\r\n        })\r\n      }\r\n\r\n      noTagsItem.items.push(item)\r\n    })\r\n\r\n    newItems.push(noTagsItem)\r\n\r\n    const tagsItem = {\r\n      name: tagsGroupName,\r\n      isEntitySet: true,\r\n      items: []\r\n    }\r\n\r\n    if (currentTagEntities) {\r\n      currentTagEntities.forEach((tag) => {\r\n        tagsItem.items.push({\r\n          name: tag.name,\r\n          data: tag\r\n        })\r\n      })\r\n    }\r\n\r\n    newItems.push(tagsItem)\r\n  }\r\n\r\n  groupEntityByTagAndType (collection, allTagEntities, entity) {\r\n    if (entity.__entitySet === 'tags') {\r\n      const name = entity.name\r\n      collection[name] = collection[name] || {}\r\n    } else if (entity.tags != null) {\r\n      entity.tags.forEach((tag) => {\r\n        const tagFound = findTagInSet(allTagEntities, tag.shortid)\r\n\r\n        if (tagFound) {\r\n          const name = tagFound.name\r\n          collection[name] = collection[name] || []\r\n          collection[name][entity.__entitySet] = collection[name][entity.__entitySet] || []\r\n          collection[name][entity.__entitySet].push(entity)\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  groupEntitiesByTag (entitySetsNames, entities) {\r\n    const newItems = []\r\n    const allTagEntities = Studio.getReferences().tags || []\r\n    const entitiesByTagAndType = {}\r\n    const entitiesByTypeWithoutTag = {}\r\n\r\n    // initialize all tag groups based on all tag entities\r\n    allTagEntities.forEach((entityTag) => {\r\n      this.groupEntityByTagAndType(entitiesByTagAndType, allTagEntities, entityTag)\r\n    })\r\n\r\n    entitySetsNames.forEach((entitySetName) => {\r\n      if (entitySetName === 'tags') {\r\n        return\r\n      }\r\n\r\n      const entitiesInSet = entities[entitySetName]\r\n\r\n      if (!entitiesInSet) {\r\n        return\r\n      }\r\n\r\n      const entitiesInSetCount = entitiesInSet.length\r\n\r\n      for (let j = 0; j < entitiesInSetCount; j++) {\r\n        const entity = entitiesInSet[j]\r\n\r\n        if (entity.tags != null) {\r\n          this.groupEntityByTagAndType(entitiesByTagAndType, allTagEntities, entity)\r\n        } else {\r\n          entitiesByTypeWithoutTag[entity.__entitySet] = entitiesByTypeWithoutTag[entity.__entitySet] || []\r\n          entitiesByTypeWithoutTag[entity.__entitySet].push(entity)\r\n        }\r\n      }\r\n    })\r\n\r\n    this.addItemsByTag(\r\n      newItems,\r\n      entitySetsNames,\r\n      allTagEntities,\r\n      entities.tags,\r\n      entitiesByTagAndType,\r\n      entitiesByTypeWithoutTag\r\n    )\r\n\r\n    return newItems\r\n  }\r\n\r\n  render () {\r\n    const { containerStyles } = this.props\r\n\r\n    return (\r\n      <div style={containerStyles}>\r\n        {/*\r\n          extending entity tree's react element to configure\r\n          custom rendering of items in tree\r\n        */}\r\n        {React.cloneElement(this.props.children, {}, ({\r\n          renderDefaultTree,\r\n          renderTree,\r\n          getSetsToRender,\r\n          entitySets,\r\n          entities\r\n        }) => {\r\n          const { organizeByTags } = this.state\r\n\r\n          if (!organizeByTags) {\r\n            return renderDefaultTree(entitySets, entities)\r\n          }\r\n\r\n          return renderTree(this.groupEntitiesByTag(getSetsToRender(entitySets), entities))\r\n        })}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default EntityTreeTagOrganizer\r\n","//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n                                                               \n\n// An array of all currently registered event handlers for a type\n                                            \n                                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                 \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberOf mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).slice().map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).slice().map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nexport default mitt;\n//# sourceMappingURL=mitt.es.js.map\n","\r\nconst noTagGroupName = '(objects without tag)'\r\nconst tagsGroupName = 'tags'\r\nconst reservedTagNames = [noTagGroupName, tagsGroupName]\r\n\r\nmodule.exports.default = reservedTagNames\r\nmodule.exports.noTagGroupName = noTagGroupName\r\nmodule.exports.tagsGroupName = tagsGroupName\r\n","import React, { Component } from 'react'\r\nimport * as organizeState from './organizeState'\r\nimport emitter from './emitter'\r\nimport styles from './TagEntityTreeButtonToolbar.css'\r\n\r\nclass TagEntityTreeOrganizeButtonToolbar extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.handleOrganizationModeChange = this.handleOrganizationModeChange.bind(this)\r\n  }\r\n\r\n  handleOrganizationModeChange (ev) {\r\n    ev.stopPropagation()\r\n\r\n    // notify parent that the organization mode has changed\r\n    emitter.emit('organizationModeByTagsChanged', !organizeState.current)\r\n    this.props.closeMenu()\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div\r\n        title='Group and organize entities tree by tag'\r\n        style={{ display: 'inline-block' }}\r\n        onClick={this.handleOrganizationModeChange}\r\n      >\r\n        <span\r\n          style={{ display: 'inline-block', marginRight: '0.3rem' }}\r\n          className={organizeState.current ? styles.active : ''}\r\n        >\r\n          <span className='fa fa-tags' />\r\n        </span>\r\n        <span style={{ display: 'inline-block' }}>\r\n          Group by tag\r\n        </span>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default TagEntityTreeOrganizeButtonToolbar\r\n","import React, { Component } from 'react'\r\nimport Studio, { Popover } from 'jsreport-studio'\r\nimport * as organizeState from './organizeState'\r\nimport emitter from './emitter'\r\nimport TagEntityTreeFilterByTags from './TagEntityTreeFilterByTags'\r\nimport styles from './TagEntityTreeButtonToolbar.css'\r\n\r\nclass TagEntityTreeFilterButtonToolbar extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      showFilter: false,\r\n      selectedTags: organizeState.filterTags || []\r\n    }\r\n\r\n    this.handleFilterClick = this.handleFilterClick.bind(this)\r\n    this.handleCloseFilter = this.handleCloseFilter.bind(this)\r\n    this.handleTagSelectChange = this.handleTagSelectChange.bind(this)\r\n  }\r\n\r\n  handleFilterClick (ev) {\r\n    ev.stopPropagation()\r\n    this.setState({ showFilter: true })\r\n  }\r\n\r\n  handleCloseFilter () {\r\n    this.setState({ showFilter: false })\r\n    this.props.closeMenu()\r\n  }\r\n\r\n  handleTagSelectChange (selectedTags) {\r\n    const { setFilter } = this.props\r\n\r\n    setFilter({\r\n      tags: selectedTags\r\n    })\r\n\r\n    this.setState({\r\n      selectedTags\r\n    }, () => {\r\n      emitter.emit('filterByTagsChanged', selectedTags)\r\n    })\r\n  }\r\n\r\n  render () {\r\n    const { showFilter, selectedTags } = this.state\r\n    const allTags = Studio.getReferences().tags\r\n    const isActive = selectedTags.length > 0\r\n\r\n    return (\r\n      <div\r\n        title='Filter entities tree by tag'\r\n        style={{ display: 'inline-block' }}\r\n        onClick={this.handleFilterClick}\r\n      >\r\n        <span style={{ display: 'inline-block' }}>\r\n          <span\r\n            style={{ display: 'inline-block', marginRight: '0.3rem' }}\r\n            className={isActive ? styles.active : ''}\r\n          >\r\n            <span className='fa fa-filter' />\r\n            &nbsp;\r\n            <span className='fa fa-tag' />\r\n          </span>\r\n          <span style={{ display: 'inline-block' }}>\r\n            Filter by tag\r\n          </span>\r\n        </span>\r\n        <Popover\r\n          open={showFilter}\r\n          onClose={this.handleCloseFilter}\r\n        >\r\n          <TagEntityTreeFilterByTags\r\n            tags={allTags}\r\n            selectedTags={selectedTags}\r\n            onTagSelectChange={this.handleTagSelectChange}\r\n            onFilterClose={this.handleCloseFilter}\r\n          />\r\n        </Popover>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default TagEntityTreeFilterButtonToolbar\r\n","import React, { Component } from 'react'\r\nimport ReactList from 'react-list'\r\nimport colorLuminance from './colorLuminance'\r\nimport getColorLuminance from './getColorLuminance'\r\nimport ShowColor from './ShowColor'\r\nimport style from './TagEntityTreeFilterByTags.css'\r\n\r\nclass TagEntityTreeFilterByTags extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.tagSelectionRef = React.createRef()\r\n    this.tagSelectionInputRef = React.createRef()\r\n    this.tagListRef = React.createRef()\r\n\r\n    this.state = {\r\n      showTagsList: true,\r\n      filterText: ''\r\n    }\r\n\r\n    this.createRenderer = this.createRenderer.bind(this)\r\n    this.addSelectedTag = this.addSelectedTag.bind(this)\r\n    this.handleTagSelectionClick = this.handleTagSelectionClick.bind(this)\r\n    this.handleChangeInputTag = this.handleChangeInputTag.bind(this)\r\n    this.handleKeyDownInputTag = this.handleKeyDownInputTag.bind(this)\r\n    this.onRemoveTagItem = this.onRemoveTagItem.bind(this)\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.focus()\r\n  }\r\n\r\n  createRenderer (tags) {\r\n    return (index, key) => this.renderTagItem(tags[index])\r\n  }\r\n\r\n  addSelectedTag (tag) {\r\n    const previousSelectedTags = this.props.selectedTags\r\n\r\n    const selectedTags = [\r\n      ...previousSelectedTags,\r\n      tag\r\n    ]\r\n\r\n    this.props.onTagSelectChange(selectedTags)\r\n    this.focus()\r\n  }\r\n\r\n  focus () {\r\n    if (this.tagSelectionInputRef.current && typeof this.tagSelectionInputRef.current.focus === 'function') {\r\n      this.tagSelectionInputRef.current.focus()\r\n    }\r\n  }\r\n\r\n  getTagsToShow (allTags, selectedTags, filterText) {\r\n    if (selectedTags.length === 0 && filterText === '') {\r\n      return allTags\r\n    }\r\n\r\n    return allTags.filter((tag) => {\r\n      let filterPass = true\r\n\r\n      if (filterText !== '') {\r\n        filterPass = tag.name.indexOf(filterText) !== -1\r\n      }\r\n\r\n      if (!filterPass) {\r\n        return false\r\n      }\r\n\r\n      const foundInSelectedTags = selectedTags.some((selectTag) => {\r\n        return selectTag.shortid === tag.shortid\r\n      })\r\n\r\n      return !foundInSelectedTags\r\n    })\r\n  }\r\n\r\n  handleTagSelectionClick (ev) {\r\n    // if the tag selection area is directly clicked\r\n    // focus the input\r\n    if (ev.target === this.tagSelectionRef.current) {\r\n      this.focus()\r\n    }\r\n  }\r\n\r\n  handleChangeInputTag (ev) {\r\n    this.setState({\r\n      filterText: ev.target.value\r\n    })\r\n  }\r\n\r\n  handleKeyDownInputTag (ev) {\r\n    if (ev.defaultPrevented) {\r\n      return\r\n    }\r\n\r\n    const keyCode = ev.keyCode\r\n    const inputTag = ev.target\r\n    let remove = false\r\n    const enterKey = 13\r\n    const removeKey = 8\r\n\r\n    if (keyCode === enterKey) {\r\n      ev.preventDefault()\r\n\r\n      return this.props.onFilterClose()\r\n    }\r\n\r\n    if (keyCode === removeKey) {\r\n      remove = true\r\n    }\r\n\r\n    if (remove && inputTag.value === '') {\r\n      const selectedTags = this.props.selectedTags\r\n      const selectedTagsLastIndex = selectedTags.length - 1\r\n\r\n      ev.preventDefault()\r\n\r\n      if (selectedTagsLastIndex >= 0) {\r\n        this.onRemoveTagItem(selectedTags[selectedTagsLastIndex], selectedTagsLastIndex)\r\n      }\r\n    }\r\n  }\r\n\r\n  onRemoveTagItem (tag, tagIndex) {\r\n    const originalSelectedTags = this.props.selectedTags\r\n\r\n    const selectedTags = [\r\n      ...originalSelectedTags.slice(0, tagIndex),\r\n      ...originalSelectedTags.slice(tagIndex + 1)\r\n    ]\r\n\r\n    this.props.onTagSelectChange(selectedTags)\r\n  }\r\n\r\n  renderTagItem (tag) {\r\n    return (\r\n      <div\r\n        key={tag.shortid}\r\n        className={style.tagsListItem}\r\n        onClick={() => this.addSelectedTag(tag)}\r\n      >\r\n        <ShowColor color={tag.color} />\r\n        &nbsp;\r\n        <span>{tag.name}</span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render () {\r\n    const { showTagsList, filterText } = this.state\r\n    const { tags, selectedTags } = this.props\r\n    const tagsToShowInList = this.getTagsToShow(tags, selectedTags, filterText)\r\n\r\n    const stylesForTagsList = {}\r\n    const stylesForInputTag = {}\r\n\r\n    if (showTagsList) {\r\n      stylesForTagsList.display = 'block'\r\n    } else {\r\n      stylesForTagsList.display = 'none'\r\n    }\r\n\r\n    if (selectedTags.length === 0) {\r\n      stylesForInputTag.width = '100%'\r\n    }\r\n\r\n    return (\r\n      <div className={style.searchTagsContainer}>\r\n        <div className={style.searchTagsInputBox}>\r\n          <div ref={this.tagSelectionRef} className={style.tagsSelect} onClick={this.handleTagSelectionClick}>\r\n            <span>\r\n              {selectedTags.map((tag, tagIndex) => {\r\n                const tagStyles = {\r\n                  backgroundColor: tag.color,\r\n                  borderColor: colorLuminance(tag.color, -0.35),\r\n                  color: getColorLuminance(tag.color) >= 0.5 ? '#000' : '#fff'\r\n                }\r\n\r\n                return (\r\n                  <span key={tag.shortid} className={style.tagsSelectItem} style={tagStyles}>\r\n                    {tag.name}\r\n                    <a className={style.tagsSelectItemRemove} onClick={() => this.onRemoveTagItem(tag, tagIndex)} />\r\n                  </span>\r\n                )\r\n              })}\r\n              <input\r\n                ref={this.tagSelectionInputRef}\r\n                type='text'\r\n                placeholder={selectedTags.length === 0 ? 'select a tag' : ''}\r\n                className={style.searchTags}\r\n                style={stylesForInputTag}\r\n                onChange={this.handleChangeInputTag}\r\n                onKeyDown={this.handleKeyDownInputTag}\r\n              />\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div\r\n          ref={this.tagListRef}\r\n          className={style.tagsListContainer}\r\n          style={stylesForTagsList}\r\n        >\r\n          <div className={style.tagsList}>\r\n            {tags.length === 0\r\n              ? (\r\n                <div className={style.tagsListEmpty}>\r\n                  No tags registered\r\n                </div>\r\n                )\r\n              : (\r\n                <ReactList\r\n                  itemRenderer={this.createRenderer(tagsToShowInList)}\r\n                  length={tagsToShowInList.length}\r\n                />\r\n                )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nTagEntityTreeFilterByTags.defaultProps = {\r\n  onTagSelectChange: () => {}\r\n}\r\n\r\nexport default TagEntityTreeFilterByTags\r\n","module.exports = Studio.libraries['react-list'];","import hexToRgb from './hexToRgb'\r\n\r\nexport default (hex) => {\r\n  const rgb = hexToRgb(hex)\r\n\r\n  let R, G, B\r\n\r\n  const RsRGB = rgb.r / 255\r\n  const GsRGB = rgb.g / 255\r\n  const BsRGB = rgb.b / 255\r\n\r\n  if (RsRGB <= 0.03928) {\r\n    R = RsRGB / 12.92\r\n  } else {\r\n    R = Math.pow(((RsRGB + 0.055) / 1.055), 2.4)\r\n  }\r\n\r\n  if (GsRGB <= 0.03928) {\r\n    G = GsRGB / 12.92\r\n  } else {\r\n    G = Math.pow(((GsRGB + 0.055) / 1.055), 2.4)\r\n  }\r\n\r\n  if (BsRGB <= 0.03928) {\r\n    B = BsRGB / 12.92\r\n  } else {\r\n    B = Math.pow(((BsRGB + 0.055) / 1.055), 2.4)\r\n  }\r\n\r\n  return (0.2126 * R) + (0.7152 * G) + (0.0722 * B)\r\n}\r\n","\r\nconst shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i\r\n\r\nexport default (hex) => {\r\n  // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\r\n  const fullHex = hex.replace(shorthandRegex, function (m, r, g, b) {\r\n    return r + r + g + g + b + b\r\n  })\r\n\r\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(fullHex)\r\n\r\n  return result\r\n    ? {\r\n        r: parseInt(result[1], 16),\r\n        g: parseInt(result[2], 16),\r\n        b: parseInt(result[3], 16)\r\n      }\r\n    : null\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchTagsContainer\":\"x-tags-TagEntityTreeFilterByTags-searchTagsContainer\",\"searchTagsInputBox\":\"x-tags-TagEntityTreeFilterByTags-searchTagsInputBox\",\"searchTags\":\"x-tags-TagEntityTreeFilterByTags-searchTags\",\"tagsListContainer\":\"x-tags-TagEntityTreeFilterByTags-tagsListContainer\",\"tagsList\":\"x-tags-TagEntityTreeFilterByTags-tagsList\",\"tagsListEmpty\":\"x-tags-TagEntityTreeFilterByTags-tagsListEmpty\",\"tagsListItem\":\"x-tags-TagEntityTreeFilterByTags-tagsListItem\",\"tagsSelect\":\"x-tags-TagEntityTreeFilterByTags-tagsSelect\",\"tagsSelectItem\":\"x-tags-TagEntityTreeFilterByTags-tagsSelectItem\",\"tagsSelectItemRemove\":\"x-tags-TagEntityTreeFilterByTags-tagsSelectItemRemove\"};","import React, { Component } from 'react'\r\nimport ShowColor from './ShowColor'\r\nimport findTagInSet from './findTagInSet'\r\n\r\nclass TagEntityTreeItem extends Component {\r\n  render () {\r\n    const { entity, entities } = this.props\r\n    let tags = entity.tags || []\r\n\r\n    // for tags, display the color right in the entity tree\r\n    if (entity.__entitySet === 'tags') {\r\n      tags = [entity]\r\n    }\r\n\r\n    const tagsLength = tags.length\r\n\r\n    return (\r\n      <div style={{ display: 'inline-block', marginLeft: '0.2rem', marginRight: '0.2rem' }}>\r\n        {tags.map((tag, tagIndex) => {\r\n          const tagFound = findTagInSet(entities.tags, tag.shortid) || {}\r\n\r\n          return (\r\n            <span key={tag.shortid} title={tagFound.name}>\r\n              <ShowColor color={tagFound.color} width={8} height={15} />\r\n              {(tagIndex !== tagsLength - 1) ? ' ' : null}\r\n            </span>\r\n          )\r\n        })}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default TagEntityTreeItem\r\n","import React, { Component } from 'react'\r\nimport Studio from 'jsreport-studio'\r\nimport ShowColor from './ShowColor'\r\nimport findTagInSet from './findTagInSet'\r\n\r\nclass TagEntityTreeTagGroupItem extends Component {\r\n  render () {\r\n    const { __entitySet } = this.props\r\n\r\n    if (__entitySet !== 'tags' && __entitySet !== 'folders') {\r\n      return null\r\n    }\r\n\r\n    let tags = []\r\n\r\n    if (__entitySet === 'tags') {\r\n      tags.push({ name: this.props.name, shortid: this.props.shortid, color: this.props.color })\r\n    } else {\r\n      tags = this.props.tags || []\r\n\r\n      tags = tags.map((t) => {\r\n        return findTagInSet(Studio.getReferences().tags, t.shortid)\r\n      })\r\n    }\r\n\r\n    const tagsLength = tags.length\r\n\r\n    return (\r\n      <div style={{ display: 'inline-block', marginLeft: '0.2rem', marginRight: '0.2rem' }}>\r\n        {tags.map((tag, tagIndex) => {\r\n          if (!tag) {\r\n            return null\r\n          }\r\n\r\n          return (\r\n            <span key={tag.shortid} title={tag.name}>\r\n              <ShowColor color={tag.color} width={8} height={15} />\r\n              {(tagIndex !== tagsLength - 1) ? ' ' : null}\r\n            </span>\r\n          )\r\n        })}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default TagEntityTreeTagGroupItem\r\n","\r\nexport default (entity, entitySets, filterInfo) => {\r\n  const { tags } = filterInfo\r\n  const allTagsInEntity = entity.tags || []\r\n\r\n  if (tags == null) {\r\n    return true\r\n  }\r\n\r\n  if (tags.length > 0) {\r\n    return tags.every((tag) => {\r\n      return allTagsInEntity.some((tagInEntity) => tagInEntity.shortid === tag.shortid)\r\n    })\r\n  }\r\n\r\n  return true\r\n}\r\n"],"sourceRoot":""}